<!--
SPDX-FileCopyrightText: Â© 2024 Siemens Healthineers AG
SPDX-License-Identifier: MIT
-->


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://Siemens-Healthineers.github.io/K2s/next/op-manual/networking-architecture/">
      
      
        <link rel="prev" href="../secure-host-access/">
      
      
        <link rel="next" href="../running-apps-as-hostprocess/">
      
      
      <link rel="icon" href="../../assets/logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Networking Architecture - K2s - Kubernetes distribution for Windows & Linux workloads</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        
        <link rel="stylesheet" href="../../assets/external/fonts.googleapis.com/css.49ea35f2.css">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#networking-architecture-for-k2s" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
You're not viewing the latest release version.
<a href="../../..">
    <strong>Click here to go to latest release.</strong>
</a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL("../.."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="K2s - Kubernetes distribution for Windows &amp; Linux workloads" class="md-header__button md-logo" aria-label="K2s - Kubernetes distribution for Windows & Linux workloads" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            K2s - Kubernetes distribution for Windows & Linux workloads
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Networking Architecture
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Siemens-Healthineers/K2s/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../quickstart/" class="md-tabs__link">
          
  
  
    
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../user-guide/hosting-variants/" class="md-tabs__link">
          
  
  
    
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../os-support/" class="md-tabs__link">
          
  
  
    
  
  Operator Manual

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../dev-guide/contributing/" class="md-tabs__link">
          
  
  
    
  
  Developer Guide

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../troubleshooting/diagnostics/" class="md-tabs__link">
          
  
  
    
  
  Troubleshooting

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="K2s - Kubernetes distribution for Windows &amp; Linux workloads" class="md-nav__button md-logo" aria-label="K2s - Kubernetes distribution for Windows & Linux workloads" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    K2s - Kubernetes distribution for Windows & Linux workloads
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Siemens-Healthineers/K2s/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../quickstart/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    User Guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/hosting-variants/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hosting Variants
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/k2s-cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    k2s CLI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/cli-shortcuts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CLI Shortcuts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/cluster-ip-addresses/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Assignment of Cluster IP Addresses for Services
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/adding-container-registry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Adding a Container Registry
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/building-container-image/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Building a Container Image
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Operator Manual
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Operator Manual
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../os-support/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Supported OS Versions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-k2s/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting K2s
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../creating-offline-package/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Creating Offline Package
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../installing-k2s/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installing K2s
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../starting-k2s/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Starting K2s
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../checking-k2s-status/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Checking K2s Status
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adding-k2s-users/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Adding K2s Users
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../stopping-k2s/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Stopping K2s
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../upgrading-k2s/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrading K2s
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuring-httpproxy-service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuring HTTPProxy Service
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../external-dns/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    External DNS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../extending-k2s-cluster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Extending K2s cluster
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../secure-host-access/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Secure Host Access
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Networking Architecture
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Networking Architecture
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#core-principles-and-architecture-simplicity-and-maximum-performance" class="md-nav__link">
    <span class="md-ellipsis">
      Core Principles and Architecture: simplicity and maximum performance
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-broader-strategic-value-of-simplicity-and-performance" class="md-nav__link">
    <span class="md-ellipsis">
      The Broader Strategic Value of Simplicity and Performance
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#alternative-solutions-considered-network-policy-controllers-same-applies-for-more-complex-cnis-like-calico" class="md-nav__link">
    <span class="md-ellipsis">
      Alternative Solutions Considered: Network Policy Controllers (same applies for more complex CNIs like Calico)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#governing-non-tcp-traffic" class="md-nav__link">
    <span class="md-ellipsis">
      Governing Non-TCP Traffic
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hostprocess-legacy-windows-application-isolation" class="md-nav__link">
    <span class="md-ellipsis">
      HostProcess &amp; Legacy Windows Application Isolation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-selected-strategy-host-level-firewall-enforcement-via-a-kubernetes-daemonset" class="md-nav__link">
    <span class="md-ellipsis">
      The Selected Strategy: Host-Level Firewall Enforcement via a Kubernetes DaemonSet
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rationale-and-strategic-benefits-for-k2s" class="md-nav__link">
    <span class="md-ellipsis">
      Rationale and Strategic Benefits for K2s
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation-example-node-firewall-daemonset" class="md-nav__link">
    <span class="md-ellipsis">
      Implementation Example: Node Firewall DaemonSet
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation-example-node-firewall-daemonset-for-windows" class="md-nav__link">
    <span class="md-ellipsis">
      Implementation Example: Node Firewall DaemonSet for Windows
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../running-apps-as-hostprocess/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Running Native Windows Apps (HostProcess & Compartments)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../uninstalling-k2s/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Uninstalling K2s
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../signcatalog-k2s/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sign K2s package
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Developer Guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Developer Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../dev-guide/contributing/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            Contributing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dev-guide/contributing/cla-corporate-contributor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Corporate Contributors
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dev-guide/contributing/cla-individual-contributor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Individual Contributors
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dev-guide/contributing/licensing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Licensing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dev-guide/contributing/powershell-dev/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PowerShell Development
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dev-guide/contributing/building-locally/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Building Locally
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dev-guide/contributing/automated-testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Automated Testing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dev-guide/contributing/tags-labels/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tags/Labels
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dev-guide/contributing/updating-documentation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Updating Documentation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dev-guide/contributing/submitting-changes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Submitting Changes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dev-guide/hosting-variants-features-matrix/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hosting Variants Features Matrix
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dev-guide/training/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Training
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Troubleshooting
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Troubleshooting
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshooting/diagnostics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Diagnostics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshooting/known-issues/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Known Issues
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#core-principles-and-architecture-simplicity-and-maximum-performance" class="md-nav__link">
    <span class="md-ellipsis">
      Core Principles and Architecture: simplicity and maximum performance
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-broader-strategic-value-of-simplicity-and-performance" class="md-nav__link">
    <span class="md-ellipsis">
      The Broader Strategic Value of Simplicity and Performance
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#alternative-solutions-considered-network-policy-controllers-same-applies-for-more-complex-cnis-like-calico" class="md-nav__link">
    <span class="md-ellipsis">
      Alternative Solutions Considered: Network Policy Controllers (same applies for more complex CNIs like Calico)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#governing-non-tcp-traffic" class="md-nav__link">
    <span class="md-ellipsis">
      Governing Non-TCP Traffic
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hostprocess-legacy-windows-application-isolation" class="md-nav__link">
    <span class="md-ellipsis">
      HostProcess &amp; Legacy Windows Application Isolation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-selected-strategy-host-level-firewall-enforcement-via-a-kubernetes-daemonset" class="md-nav__link">
    <span class="md-ellipsis">
      The Selected Strategy: Host-Level Firewall Enforcement via a Kubernetes DaemonSet
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rationale-and-strategic-benefits-for-k2s" class="md-nav__link">
    <span class="md-ellipsis">
      Rationale and Strategic Benefits for K2s
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation-example-node-firewall-daemonset" class="md-nav__link">
    <span class="md-ellipsis">
      Implementation Example: Node Firewall DaemonSet
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation-example-node-firewall-daemonset-for-windows" class="md-nav__link">
    <span class="md-ellipsis">
      Implementation Example: Node Firewall DaemonSet for Windows
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/Siemens-Healthineers/K2s/edit/main/docs/op-manual/networking-architecture.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<!--
SPDX-FileCopyrightText: Â© 2025 Siemens Healthineers AG
SPDX-License-Identifier: MIT
-->

<h1 id="networking-architecture-for-k2s">Networking Architecture for <em>K2s</em></h1>
<h2 id="core-principles-and-architecture-simplicity-and-maximum-performance">Core Principles and Architecture: simplicity and maximum performance</h2>
<p>In alignment with <em>K2s</em>' foundational design principles of operational <b>simplicity</b> and <b>maximum performance</b>, our networking architecture is built upon Flannel CNI configured in host-gateway mode. This provides a transparent, high-throughput, and low-latency data plane that is ideal for demanding workloads and facilitates straightforward network analysis. For production-grade security, K2s integrates the <a href="https://github.com/Siemens-Healthineers/K2s/blob/main/addons/security/README.md">security addon</a> which uses <a href="https://linkerd.io/">Linkerd</a> to establish a zero-trust environment for all TCP-based traffic through transparent mTLS and fine-grained policy enforcement.</p>
<h2 id="the-broader-strategic-value-of-simplicity-and-performance">The Broader Strategic Value of Simplicity and Performance</h2>
<p>The commitment to a simple and performant networking foundation provides strategic advantages that extend far beyond enabling zero-trust features. This architecture directly translates into tangible value for both operators and developers running workloads on <em>K2s</em>.</p>
<p><b>Accelerated Diagnostics and Troubleshooting</b>: The transparent host-gateway data plane avoids complex encapsulation (like VXLAN or <abbr title="Internet Protocol">IP</abbr>-in-<abbr title="Internet Protocol">IP</abbr>). Network traffic remains directly observable on the host, allowing operators to use standard, universal tools like tcpdump and Wireshark for rapid, intuitive debugging. This dramatically reduces the mean time to resolution (MTTR) for network-related issues compared to debugging opaque overlay networks.</p>
<p><b>Maximized Resource Efficiency and Throughput</b>: By minimizing the <abbr title="Central Processing Unit">CPU</abbr> and memory overhead of the networking stack, more resources are available for the applications themselves. This near-bare-metal network performance is critical for the high-throughput and low-latency requirements of data-intensive workloads, such as medical imaging, AI/ML data pipelines, and transactional databases.</p>
<p><b>Reduced Operational Overhead and Increased Reliability</b>: A simpler architecture with fewer moving parts inherently reduces the system's attack surface and the potential for component failure or misconfiguration. This lean operational model lowers the cognitive load on platform teams, making the cluster easier to manage, secure, and upgrade, thereby increasing overall system reliability.</p>
<p><b>Enhanced Developer and Operator Experience</b>: The intuitive networking model empowers development teams to deploy and manage their applications without needing to become experts in complex network virtualization. This clarity fosters a stronger sense of ownership and accelerates the development lifecycle, as teams can reason about network communication in a straightforward manner.</p>
<div align="center">

![Overview](assets/networksimplicity.png)
</div>

<h2 id="alternative-solutions-considered-network-policy-controllers-same-applies-for-more-complex-cnis-like-calico">Alternative Solutions Considered: Network Policy Controllers (same applies for more complex CNIs like Calico)</h2>
<p>During our evaluation, we analyzed solutions designed to enable native Kubernetes NetworkPolicy support on platforms where the CNI does not enforce it. A notable example is the windows-network-policy-controller from the Kubernetes SIGs community, which translates NetworkPolicy objects into rules for the Windows Filtering Platform.</p>
<p><b>Potential Advantage</b>: The primary benefit of such a controller is the ability to use the standard Kubernetes NetworkPolicy <abbr title="Application Programming Interface">API</abbr>. This provides a familiar, powerful abstraction for defining granular, label-based traffic rules between pods, which is highly desirable from a user-experience perspective.</p>
<p><b>Reasons for Rejection</b>: Despite this advantage, we concluded that this approach was not aligned with the core K2s tenets for the following reasons:</p>
<p><b>Increased Complexity</b>: It introduces another active controller into the cluster's critical path. This component must be installed, managed, and monitored, adding operational overhead. Its logic for translating policies into host rules creates a layer of abstraction that can be difficult to debug when unexpected network behavior occurs.</p>
<p><b>Performance and Scalability Concerns</b>: A network policy controller must continuously watch the Kubernetes <abbr title="Application Programming Interface">API</abbr> for changes to pods (e.g., label changes, scaling events) and policies. In dynamic clusters, this can trigger frequent and numerous updates to the host's firewall ruleset, potentially leading to performance degradation, rule conflicts, or transient connectivity issues. This dynamic management layer adds computational overhead compared to the static, highly-performant rules applied by our chosen DaemonSet approach.
In addition, these solutions introduce packet-processing overhead and extra <abbr title="Central Processing Unit">CPU</abbr> cost from kernel/user space transitionsâlatency increases of 100 microseconds up to 2 ms per packet, throughput reductions of 20%â80%, and additional <abbr title="Central Processing Unit">CPU</abbr> overhead of +20%â200%. Packet drops may also occur under high load.</p>
<p><b>Deviation from Simplicity</b>: The goal of K2s is to provide a transparent and easily understandable system. A dynamic controller that generates a complex and ever-changing set of host firewall rules moves away from this principle, making it harder for operators to reason about the state of the network at any given moment. </p>
<p><b><abbr title="Operating System">OS</abbr> support</b> Many of the analyzed solutions were not working under Windows, they provided only for Linux nodes a viable solution.</p>
<h2 id="governing-non-tcp-traffic">Governing Non-TCP Traffic</h2>
<p>A critical consideration in this chosen architecture is the governance of non-TCP protocols, primarily UDP. As Linkerd's service mesh capabilities are focused on L4/L7 TCP traffic, UDP communication operates outside its security perimeter. This necessitates a robust and performant solution to control UDP traffic flows without compromising our core design goals of simplicity and speed. While alternative CNIs like Calico offer integrated policy enforcement, they introduce significant operational complexity and potential performance overhead, which runs counter to the <em>K2s</em> philosophy.</p>
<h2 id="hostprocess-legacy-windows-application-isolation">HostProcess &amp; Legacy Windows Application Isolation</h2>
<p>For scenarios where existing native Windows applications must be integrated into the cluster with compartmentalized networking and optional service mesh capabilities, <em>K2s</em> supports a HostProcess + network compartment pattern. This allows unmodified executables to run with per-instance (or shared) compartment isolation while still benefiting from Linkerd (for TCP) and host-level policy controls (for UDP / non-meshed flows).</p>
<p>See: <a href="../running-apps-as-hostprocess/">Running Native Windows Applications with HostProcess + Network Compartments</a></p>
<p>Key advantages of this pattern within the broader networking model:
* Preserves the simplicity of the Flannel host-gateway data plane.
* Avoids introducing opaque overlays when isolating legacy processes.
* Leverages Linkerd for encrypted / observable TCP while keeping direct compartment routing transparent.
* Enables per-workload or per-tenant segmentation without complex CNI changes.</p>
<p>This complements the host-level firewall DaemonSets by layering process-level isolation (compartment) with node-level enforcement.</p>
<h2 id="the-selected-strategy-host-level-firewall-enforcement-via-a-kubernetes-daemonset">The Selected Strategy: Host-Level Firewall Enforcement via a Kubernetes DaemonSet</h2>
<p>To address this gap, we have adopted a strategy of leveraging the native, kernel-level firewalls of the host operating systems (Linux iptables and the Windows Filtering Platform). The application and lifecycle of these firewall rules are managed declaratively from within the cluster using a privileged Kubernetes DaemonSet.</p>
<h2 id="rationale-and-strategic-benefits-for-k2s">Rationale and Strategic Benefits for K2s</h2>
<p>This decision reinforces our commitment to performance and simplicity through the following key advantages:</p>
<p><b>Upholding Peak Performance</b>: By delegating UDP filtering to the highly-optimized packet processing engines within the host kernel, we ensure that security policies are enforced with negligible latency or throughput degradation. This preserves the performance integrity of the <em>K2s</em> data plane, which is paramount for data-intensive applications.</p>
<p><b>Maintaining Architectural Simplicity</b>: This approach avoids introducing a complex secondary networking stack. We retain the lean, understandable Flannel CNI and sidestep the steep learning curve and operational burden associated with more intricate CNI solutions. The control plane remains minimalist and easy to manage.</p>
<p><b>Declarative and Scalable Management</b>: While the enforcement mechanism is at the host level, its management is fully integrated into the Kubernetes control plane. The DaemonSet ensures that every nodeâpresent and futureâautomatically and consistently receives the correct security posture. This prevents configuration drift and provides a scalable, "GitOps-friendly" method for managing node security.</p>
<p><b>Robust and Mature Technology</b>: We are building upon the most stable, battle-tested components of the operating systems themselves. iptables and the Windows Firewall are mature, reliable, and well-understood technologies, minimizing the risk of introducing new bugs or unpredictable behaviors into the networking stack.</p>
<h2 id="implementation-example-node-firewall-daemonset">Implementation Example: Node Firewall DaemonSet</h2>
<p>The following DaemonSet manifest provides a reference implementation for applying firewall rules on all Linux nodes. A corresponding DaemonSet using a Windows container image and PowerShell commands would be deployed for Windows nodes.</p>
<div class="highlight"><span class="filename">Text Only</span><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>apiVersion: apps/v1
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>kind: DaemonSet
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>metadata:
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>  name: k2s-node-firewall-configurator
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>  namespace: kube-system
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>  labels:
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    app.kubernetes.io/name: k2s-node-firewall
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>spec:
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>  selector:
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>    matchLabels:
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>      app.kubernetes.io/name: k2s-node-firewall
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>  template:
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>    metadata:
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>      labels:
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>        app.kubernetes.io/name: k2s-node-firewall
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>    spec:
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>      # Target Linux nodes specifically
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>      nodeSelector:
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>        kubernetes.io/os: linux
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>      # Allow this pod to run on any node, including control-plane
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>      tolerations:
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>      - operator: Exists
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>      # Use the host&#39;s namespaces to modify its settings
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>      hostNetwork: true
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>      hostPID: true
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>      containers:
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a>      - name: iptables-configurator
<a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a>        image: docker.io/library/alpine:latest # A minimal, secure base image
<a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a>        # This pod requires elevated privileges to modify host iptables
<a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a>        securityContext:
<a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a>          privileged: true
<a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a>        command: [&quot;/bin/sh&quot;, &quot;-c&quot;]
<a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a>        args:
<a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a>        - |
<a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a>          # Ensure iptables is available
<a id="__codelineno-0-36" name="__codelineno-0-36" href="#__codelineno-0-36"></a>          apk add --no-cache iptables
<a id="__codelineno-0-37" name="__codelineno-0-37" href="#__codelineno-0-37"></a>
<a id="__codelineno-0-38" name="__codelineno-0-38" href="#__codelineno-0-38"></a>          # IPTABLES RULESET FOR UDP RESTRICTION
<a id="__codelineno-0-39" name="__codelineno-0-39" href="#__codelineno-0-39"></a>
<a id="__codelineno-0-40" name="__codelineno-0-40" href="#__codelineno-0-40"></a>          # 1. Allow established and related traffic to pass. This is crucial for return packets.
<a id="__codelineno-0-41" name="__codelineno-0-41" href="#__codelineno-0-41"></a>          iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT || true
<a id="__codelineno-0-42" name="__codelineno-0-42" href="#__codelineno-0-42"></a>          iptables -A OUTPUT -m state --state ESTABLISHED,RELATED -j ACCEPT || true
<a id="__codelineno-0-43" name="__codelineno-0-43" href="#__codelineno-0-43"></a>
<a id="__codelineno-0-44" name="__codelineno-0-44" href="#__codelineno-0-44"></a>          # 2. Specifically allow outbound DNS requests (UDP to port 53)
<a id="__codelineno-0-45" name="__codelineno-0-45" href="#__codelineno-0-45"></a>          iptables -A OUTPUT -p udp --dport 53 -j ACCEPT || true
<a id="__codelineno-0-46" name="__codelineno-0-46" href="#__codelineno-0-46"></a>
<a id="__codelineno-0-47" name="__codelineno-0-47" href="#__codelineno-0-47"></a>          # 3. Specifically allow inbound DNS responses (UDP from port 53)
<a id="__codelineno-0-48" name="__codelineno-0-48" href="#__codelineno-0-48"></a>          iptables -A INPUT -p udp --sport 53 -j ACCEPT || true
<a id="__codelineno-0-49" name="__codelineno-0-49" href="#__codelineno-0-49"></a>
<a id="__codelineno-0-50" name="__codelineno-0-50" href="#__codelineno-0-50"></a>          # 4. Drop all other UDP traffic attempting to be forwarded between network interfaces (e.g., pod-to-pod across nodes)
<a id="__codelineno-0-51" name="__codelineno-0-51" href="#__codelineno-0-51"></a>          iptables -A FORWARD -p udp -j DROP || true
<a id="__codelineno-0-52" name="__codelineno-0-52" href="#__codelineno-0-52"></a>
<a id="__codelineno-0-53" name="__codelineno-0-53" href="#__codelineno-0-53"></a>          # 5. Drop all other inbound and outbound UDP traffic from the node itself
<a id="__codelineno-0-54" name="__codelineno-0-54" href="#__codelineno-0-54"></a>          iptables -A INPUT -p udp -j DROP || true
<a id="__codelineno-0-55" name="__codelineno-0-55" href="#__codelineno-0-55"></a>          iptables -A OUTPUT -p udp -j DROP || true
<a id="__codelineno-0-56" name="__codelineno-0-56" href="#__codelineno-0-56"></a>
<a id="__codelineno-0-57" name="__codelineno-0-57" href="#__codelineno-0-57"></a>          echo &quot;K2s UDP firewall rules applied successfully.&quot;
<a id="__codelineno-0-58" name="__codelineno-0-58" href="#__codelineno-0-58"></a>
<a id="__codelineno-0-59" name="__codelineno-0-59" href="#__codelineno-0-59"></a>          # Keep the container alive indefinitely
<a id="__codelineno-0-60" name="__codelineno-0-60" href="#__codelineno-0-60"></a>          sleep infinity
</code></pre></div>
<h2 id="implementation-example-node-firewall-daemonset-for-windows">Implementation Example: Node Firewall DaemonSet for Windows</h2>
<div class="highlight"><span class="filename">Text Only</span><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a># Filename: windows-node-firewall-daemonset.yaml
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>apiVersion: apps/v1
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>kind: DaemonSet
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>metadata:
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>  name: k2s-windows-node-firewall
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>  namespace: kube-system
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>  labels:
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>    app.kubernetes.io/name: k2s-node-firewall
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>spec:
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>  selector:
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>    matchLabels:
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>      app.kubernetes.io/name: k2s-windows-node-firewall
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>  template:
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>    metadata:
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>      labels:
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>        app.kubernetes.io/name: k2s-windows-node-firewall
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>    spec:
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>      nodeSelector:
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a>        kubernetes.io/os: windows
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a>      tolerations:
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a>      - operator: Exists
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a>      securityContext:
<a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a>        windowsOptions:
<a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a>          hostProcess: true
<a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a>          runAsUserName: &quot;System&quot;
<a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a>      hostNetwork: true
<a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a>      containers:
<a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a>      - name: powershell-configurator
<a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a>        image: mcr.microsoft.com/powershell:lts-nanoserver-1809
<a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a>        command:
<a id="__codelineno-1-31" name="__codelineno-1-31" href="#__codelineno-1-31"></a>        - &quot;powershell.exe&quot;
<a id="__codelineno-1-32" name="__codelineno-1-32" href="#__codelineno-1-32"></a>        - &quot;-Command&quot;
<a id="__codelineno-1-33" name="__codelineno-1-33" href="#__codelineno-1-33"></a>        args:
<a id="__codelineno-1-34" name="__codelineno-1-34" href="#__codelineno-1-34"></a>        - |
<a id="__codelineno-1-35" name="__codelineno-1-35" href="#__codelineno-1-35"></a>          # Define a unique group name for our rules
<a id="__codelineno-1-36" name="__codelineno-1-36" href="#__codelineno-1-36"></a>          $group = &#39;K2s-UDP-Policy&#39;
<a id="__codelineno-1-37" name="__codelineno-1-37" href="#__codelineno-1-37"></a>
<a id="__codelineno-1-38" name="__codelineno-1-38" href="#__codelineno-1-38"></a>          # Remove any pre-existing rules in this group to ensure a clean state
<a id="__codelineno-1-39" name="__codelineno-1-39" href="#__codelineno-1-39"></a>          Get-NetFirewallRule -Group $group | Remove-NetFirewallRule
<a id="__codelineno-1-40" name="__codelineno-1-40" href="#__codelineno-1-40"></a>
<a id="__codelineno-1-41" name="__codelineno-1-41" href="#__codelineno-1-41"></a>          # Rule 1: Block all inbound UDP traffic by default.
<a id="__codelineno-1-42" name="__codelineno-1-42" href="#__codelineno-1-42"></a>          New-NetFirewallRule -DisplayName &#39;Block All UDP Inbound&#39; -Group $group -Direction Inbound -Action Block -Protocol UDP -Profile Any
<a id="__codelineno-1-43" name="__codelineno-1-43" href="#__codelineno-1-43"></a>
<a id="__codelineno-1-44" name="__codelineno-1-44" href="#__codelineno-1-44"></a>          # Rule 2: Explicitly allow inbound DNS responses (overrides the block rule).
<a id="__codelineno-1-45" name="__codelineno-1-45" href="#__codelineno-1-45"></a>          New-NetFirewallRule -DisplayName &#39;Allow DNS Inbound (UDP)&#39; -Group $group -Direction Inbound -Action Allow -Protocol UDP -LocalPort 53 -Profile Any
<a id="__codelineno-1-46" name="__codelineno-1-46" href="#__codelineno-1-46"></a>
<a id="__codelineno-1-47" name="__codelineno-1-47" href="#__codelineno-1-47"></a>          # Rule 3: Block all outbound UDP traffic by default.
<a id="__codelineno-1-48" name="__codelineno-1-48" href="#__codelineno-1-48"></a>          New-NetFirewallRule -DisplayName &#39;Block All UDP Outbound&#39; -Group $group -Direction Outbound -Action Block -Protocol UDP -Profile Any
<a id="__codelineno-1-49" name="__codelineno-1-49" href="#__codelineno-1-49"></a>
<a id="__codelineno-1-50" name="__codelineno-1-50" href="#__codelineno-1-50"></a>          # Rule 4: Explicitly allow outbound DNS requests.
<a id="__codelineno-1-51" name="__codelineno-1-51" href="#__codelineno-1-51"></a>          New-NetFirewallRule -DisplayName &#39;Allow DNS Outbound (UDP)&#39; -Group $group -Direction Outbound -Action Allow -Protocol UDP -RemotePort 53 -Profile Any
<a id="__codelineno-1-52" name="__codelineno-1-52" href="#__codelineno-1-52"></a>
<a id="__codelineno-1-53" name="__codelineno-1-53" href="#__codelineno-1-53"></a>          Write-Host &quot;K2s Windows UDP firewall rules applied.&quot;
<a id="__codelineno-1-54" name="__codelineno-1-54" href="#__codelineno-1-54"></a>
<a id="__codelineno-1-55" name="__codelineno-1-55" href="#__codelineno-1-55"></a>          # Keep the container alive
<a id="__codelineno-1-56" name="__codelineno-1-56" href="#__codelineno-1-56"></a>          Start-Sleep -Seconds 2147483647
</code></pre></div>
<p>Conclusion</p>
<p>By implementing UDP security policies via a host-firewall DaemonSet, <em>K2s</em> strikes an optimal balance. We secure the cluster by closing the UDP gap while staying true to our core tenets: delivering a Kubernetes distribution that is exceptionally fast, operationally simple, and ready for the most demanding production workloads.</p>
<!--
SPDX-FileCopyrightText: Â© 2024 Siemens Healthineers AG
SPDX-License-Identifier: MIT
-->












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../secure-host-access/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Secure Host Access">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Secure Host Access
              </div>
            </div>
          </a>
        
        
          
          <a href="../running-apps-as-hostprocess/" class="md-footer__link md-footer__link--next" aria-label="Next: Running Native Windows Apps (HostProcess &amp; Compartments)">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Running Native Windows Apps (HostProcess & Compartments)
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 Siemens Healthineers AG
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.top", "navigation.tabs", "navigation.tabs.sticky", "navigation.instant", "navigation.instant.progress", "navigation.tracking", "navigation.footer", "navigation.indexes", "search.suggest", "search.highlight", "search.share", "announce.dismiss", "content.action.edit", "content.code.copy", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"alias": true, "default": "latest", "provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>