# SPDX-FileCopyrightText: Â© 2026 Siemens Healthineers AG
#
# SPDX-License-Identifier: MIT

# This Gateway serves as the central ingress gateway for the cluster.
# HTTPRoutes in any namespace can reference this Gateway by name to handle
# traffic for k2s.cluster.local. See for example:
#  addons/dashboard/manifests/ingress-nginx/dashboard-nginx-gw-route.yaml
#  addons/logging/manifests/opensearch-dashboards/nginx-gw-route.yaml
# This is the non-secure version that only provides HTTP (no HTTPS).
# Use cluster-local-nginx-gw-secure.yaml if you need HTTPS with cert-manager.
apiVersion: gateway.networking.k8s.io/v1
kind: Gateway
metadata:
  name: nginx-cluster-local
  namespace: nginx-gw
  labels:
    app.kubernetes.io/part-of: nginx-gw
    app.kubernetes.io/name: nginx-gw
    app.kubernetes.io/instance: nginx-gw
spec:
  gatewayClassName: nginx-gw
  listeners:
  - name: http
    hostname: k2s.cluster.local
    port: 80
    protocol: HTTP
    allowedRoutes:
      namespaces:
        from: All
  - name: https
    hostname: k2s.cluster.local
    port: 443
    protocol: HTTPS
    tls:
      mode: Terminate
      certificateRefs:
      - kind: Secret
        name: k2s-cluster-local-tls
    allowedRoutes:
      namespaces:
        from: All
