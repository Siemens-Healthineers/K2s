# SPDX-FileCopyrightText: Â© 2026 Siemens Healthineers AG
#
# SPDX-License-Identifier: MIT

apiVersion: v1
kind: AddonManifest
metadata:
  name: ingress
  description: Ingress Controller for external access
spec:
  implementations:
    - name: nginx
      description: Ingress Controller for external access that uses nginx as a reverse proxy
      offline_usage:
        linux:
          repos: []
          deb: []
          curl: []
          additionalImages:
            - registry.k8s.io/external-dns/external-dns
          additionalImagesFiles:
            - ../../common/manifests/external-dns/deployment.yaml
        windows:
          curl:
            - url: https://github.com/cert-manager/cmctl/releases/download/v2.0.0/cmctl_windows_amd64.exe
              destination: bin\cmctl.exe
      commands:
        enable:
          cli:
            examples:
              - cmd: k2s addons enable ingress nginx
                comment: Enable ingress nginx in k2s
          script:
            subPath: nginx/Enable.ps1
        disable:
          cli:
            examples:
              - cmd: k2s addons disable ingress nginx
                comment: Disable addon ingress nginx in k2s
          script:
            subPath: nginx/Disable.ps1
    - name: traefik
      description: Ingress Controller for external access that uses traefik as a reverse proxy
      offline_usage:
        linux:
          repos: []
          deb: []
          curl: []
          additionalImages:
            - registry.k8s.io/external-dns/external-dns
          additionalImagesFiles:
            - ../../common/manifests/external-dns/deployment.yaml
        windows:
          curl: 
            - url: https://github.com/cert-manager/cmctl/releases/download/v2.0.0/cmctl_windows_amd64.exe
              destination: bin\cmctl.exe
      commands:
        enable:
          cli:
            examples:
              - cmd: k2s addons enable ingress traefik
                comment: Enable ingress traefik in k2s
          script:
            subPath: traefik/Enable.ps1
        disable:
          cli:
            examples:
              - cmd: k2s addons disable ingress traefik
                comment: Disable addon ingress traefik in k2s
          script:
            subPath: traefik/Disable.ps1
    - name: nginx-gw
      description: Ingress Controller for external access that uses NGINX Gateway Fabric
      offline_usage:
        linux:
          repos: []
          deb: []
          curl: []
          additionalImages:
          - registry.k8s.io/external-dns/external-dns
          additionalImagesFiles:
          - ../../common/manifests/external-dns/deployment.yaml
        windows:
          curl:
            - url: https://github.com/cert-manager/cmctl/releases/download/v2.0.0/cmctl_windows_amd64.exe
              destination: bin\cmctl.exe
      commands:
        enable:
          cli:
            examples:
              - cmd: k2s addons enable ingress nginx-gw
                comment: Enable ingress nginx-gw in k2s
          script:
            subPath: nginx-gw/Enable.ps1
        disable:
          cli:
            examples:
              - cmd: k2s addons disable ingress nginx-gw
                comment: Disable addon ingress nginx-gw in k2s
          script:
            subPath: nginx-gw/Disable.ps1 